




# 简洁代码规则
- 能通过所有测试
- 没有重复代码
- 体现系统中所有的设计理念
- 尽量少的引用类、方法和函数



# 编写整洁代码的方法
- 提前构造一个小的抽象，目的是方便修改，此外最重要的是让你记得这个功能最初的目的是什么，以免随意修改背离初衷了


# 命名规范
- 变量和函数的命名要尽量有意义，不要使用a、b、b这类的无意义的命名。
- 避免误导，比如指明一组账号(account)，命名的时候不要使用accountList作为命名结尾，可以使用accountGroup结尾，(甚至真的是个List容器也不要使用List结尾)。还有例如数字1和字母l，数字0和字母O。
- 做有意义的区分，比如账户的实体类，accountInfo和accountData看上去不一样，但是从意思是根本没有任何区别，根本对区分有任何帮助。
- 使用可搜索的名称，最常见的例子就是各个表中的状态值，比如很多表的状态值都是从1开始，如果直接写数字的话，根本就无法搜索，而且也不直观，最好是不同的状态值定义不同的变量，便于理解、区分和搜索
- 避免思维映射，尽量不要让阅读你代码的人根据你的命名联想到他脑中熟悉的名称，这样可能让他产生误解。
- 类名和对象名应该使用名词或名词短语，方法和函数应该使用动词或动词短语，重载构造器的时候最好使用静态工厂方法，从方法上更好的理解该构造方法的作用。
- 同一类事物对应同一个词，比如model实体类都用model结尾，数据库对象都用vo结尾，要保持一致，如果同一类对象使用不同的名称可能让人疑惑两者有什么不同。
- 不要使用双关语，比如add本来意思是添加的意思，但是你却用来表示拼接两个字符串，容易造成误解
- 恰当的适用语境，比如一个方法中是根据各种不同的状态值来组成不同的字符串，可以把各种组合封装成不同的方法，根据状态值去调用，然后给方法起有意义的命名，这样阅读性更好。但是也不要添加无用的前缀，尽量精简准确，不用大量使用相同的前缀，毫无意义而且难以查找


# 函数
- 短小，函数最好在保证阅读性的基础上尽量写的短一点，这样更加清晰
- 只做一件事，函数里面最好只做一件事，这个一件事是指抽象的概念，比如你要筛选出一个集合中的某些值，这就是一件事
- 每个函数一个抽象层级，抽象层级表示一类性质的事，比如拼接字符串是一个抽象层级，而请求网络又是一个层级，而函数不应当把不同的抽象层级混到一起
- switch语句，如果直接使用switch语句的话随着版本的更新这个switch语句的分支会越来越多，所以可以使用工厂模式，这样的话每个switch的判断只要新建一个子类工厂就可以解决了。
- 使用描述性的名称，给函数起带有描述性的长名字要比无意义的短名字要好的多，让人能够快速了解这个函数是做什么的。
- 函数参数
  - 如果是对输入的参数进行某种修改的话，就要返回一个被修改的对象，这样更加直观。
  - 函数的参数越少越好，如果超过三个的话尽量使用对象封装，因为参数的数量多的话，让人无法根据那么多的参数中理解这个方法的意义
  - 不要像函数中传递boolean参数，这样的话这个参数的逻辑就是一分为二了，而且还限制了重构的范围。
  - 函数和参数的名字最好是动词/名词的形式，这样更好理解这个方法对这个参数做了什么操作。
- 分隔指令与询问，函数最好只做一件事，比如修改对象的状态，比如返回对象的相关信息，如果混在一起，可能会产生误解
- 使用异常代替错误码
  - 使用错误码的话可能导致每种情况都判断返回什么样的错误码，会造成很多层的嵌套判断
  - 抽离try/catch，单独把try/catch放在函数中，前后都不要有其他的操作，然后直接在try中调用别的函数，这样异常代码和逻辑代码是分离开的
  - 使用错误码会一种增加错误码，而异常只需要派生子类异常就可以了
- 消除重复，这是最基本也是最有效的减少代码错误的方法，因为相同的逻辑，如果你分开多个地方写，每次要修改，所有的地方都要修改，还可能会遗漏或者改错，而抽象成一个函数之后，每次修改只需要修改一处就可以。
- 结构化编程，即每个函数只有一个入口一个出口，代码中不能有break和continue语句，也不能有goto语句，逻辑清晰，但是这个适用于大函数，小函数不必刻意追求这些，使用了这些关键字反而更加高效。


# 注释
- 总的来讲，如果能够通过规范合理的命名表达意思就不要使用注释，除非是警示作用，比如这个方法使用要注意的情况，还有就是复杂的难以理解的逻辑也最好使注释。使用注释一定要确保注释的内容是正确易懂的，否则的话可能造成误解。注释是用来帮助我们更好的快速了解代码逻辑的，而不是起反作用的。

# 格式
- 相关性很强的逻辑代码最好放得越近越好，变量名也是，而且变量最好和相关的逻辑放到一起，如果是全局都用到的则放到方法的开头。还有正确的使用缩进，让代码更加容易理解。

# 对象和数据结构
最好遵守得墨忒耳定律，调用者不应该了解它调用的对象的内部情况，对象不应该把内部细节暴露在外
  - 方法只调用对象本身
  - 方法只调用通过参数传递进来的对象
  - 方法自己本身创建的对象
  - 方法调用的对象本身所持有的对象

# 错误处理
- 使用try-catch/finally代替错误码，将业务逻辑和异常处理逻辑彻底分离开
- 适当使用try-catch/finally语句，让我们代码更加健壮，尽可能的把异常控制在可控范围内
- 详细的记录异常发生的环境和情况，捕捉和抛出异常就是为了能够更好的处理它们，如果不加以详细的记录只是模糊的返回无法辨认的信息，那么异常就没有任何使用的意义
- 所有业务逻辑的特例都不应该使用异常来处理，这样打断了正常的业务逻辑，将两者混合到了一起
- 不要返回null值，这样会让调用者不得不增加许多的判空校验，也不要传递null值，传递null值毫无意义，根本就无法使被调用的方法进行正常的逻辑运算。

# 类
- 尽量先是公共静态常量，私有静态变量，私有实体变量的顺讯从上到下，公共函数调用的私有函数也应该跟在公共函数下面，符合自顶向下原则。
- 类应该尽量短小
  - 单一权责原则，每个类应该尽量只负责一项功能职责，其中的方法也应该是只和职责相关的。
  - 内聚，当类中的变量被更多类中的方法使用时，这个类的内聚性就更高。当一个类无法保持内聚的时候就是拆分的时候到了。
  - 尽量遵循依赖倒置原则和开发闭合原则，依赖抽象而不是具体实现，开放扩展并且封闭修改。
  
# 迭进
通过一步一步的迭进设计来让代码更加简洁
- 运行所有的测试，来确保整体的重构没有出问题
- 不可重复，类似的代码不应该复制粘贴，应该直接复用。
- 表达力，代码的变量应该尽量规范，阅读性应该尽量要好，避免再次迭代的时候难以下手
- 尽可能保持类和方法不要太多，太多会很乱，难以维护。

