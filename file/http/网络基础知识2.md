### 1. IP地址和子网掩码

IP地址就是IP协议提供的一种地址格式，IP协议是在网络层上的，IP地址是唯一的，可以通过IP来确定连接到网络上的某一台设备。

- 格式

   通常IP是以十进制形式表示，分为4组，每组之间使用圆点隔开。本质上IP地址是一串32比特的字符串，8比特等于1字节，也就是4字节的字符串。所以IP地址也可以转换为二进制格式，例如下面这个例子。
   
   ```
   10.1.2.3 
   00001010.00000001.00000010.00000011
   ```

- 子网掩码

   IP地址中实际上包含了两部分的信息，分别是网络号和主机号，但是单凭IP地址本身是无法知道哪部分是网络号，哪部分是主机号，因此这里引入了一个新的概念，子网掩码，它的作用就是用来辨别一个IP地址中的网络号和主机号。

   子网掩码是和IP相同的格式，32比特位，4字节的字符串，如下列的子网掩码转化为二进制后，左边24位都是1，这表示IP地址的二进制字符串中左边24位是网络位，右边的8位是0，则表示IP地址二进制字符串的右边8位是主机位，在子网掩码中1是网络位，0是主机位。子网掩码还可以直接用比特位来显示，比如下面的```/24```。

   在下面的例子中，IP地址转为十进制后，```10.11.12```是网络位，```13```是主机位。

   ```
   // 二进制的子网掩码和十进制的子网掩码
   255.255.255.0 11111111.11111111.11111111.00000000
   // IP/子网掩码
   10.11.12.13/255.255.255.0
   10.11.12.13/24
   ```
- 网络号和主机号
  
  因为整个互联网是由多个小型网络构成，而每个网络中又有不同的设备，因此网络号是用来寻找指定的网络，而主机号则是寻找网络中指定的设备。

  - 网络号

     网络号的计算方式相对比较简单，将IP地址和子网掩码都转为二进制格式，然后每位进行```与(and)```操作，最后得到的就是网络号
    
     ```
     // IP/子网掩码
     192.168.2.1/255.255.255.0

     // IP二进制字符串
     11000000.10101000.00000010.00000000
     // 子网掩码二进制字符串
     11111111.11111111.11111111.00000000
     // 进行"与(and)"操作
     11000000.10101000.00000010.00000000
     // 二进制的网络号
     192.168.2.0
     ```
  - 主机号

     主机号其实就是说某个网络之内设备的唯一标识了，例如在一个局域网内的所有机器IP的第四组都是不一样的，就是因为主机号作为唯一标识是不能重复的，例如下面的子网掩码，最后一组的范围是[0,255]，所以就有256个主机号，但是要去掉0和255，也就是子网掩码二进制格式下主机号全是0和1的情况，0是代表整个子网(网络地址)，255则代表广播(当向该地址发送数据包时，全网都能收到)。

     ```
     // 256 - 2 = 254
     255.255.255.0
     11111111.11111111.11111111.00000000

     // 255² - 2 = 65023
     255.255.0.0
     11111111.11111111.00000000.00000000
     ```

---


### 2. DNS(Domain Name System)解析

前面说到了IP地址是确定网络上某台设备的唯一标识，但是实际中访问网页更多的是使用域名，因为相对于IP来说域名更容易记忆，因此使用域名访问的时候就必须要将域名解析成对应的IP，这个过程就是需要经过DNS服务器来完成。


- DNS解析器

  DNS解析会调用解析器去根据域名查询IP地址。

  解析器本质上其实就是代码类库，比如UNIX系操作系统BSD中开发的C语言库，Socket库就是一个解析器，至此后面其他的语言和操作系统也都提供了Socket库，Socket库也成为了网络开发中的一种标准库。
  
- DNS服务器
   
  既然是DNS服务器，那么它也有它自己的IP，所有在操作系统上都可以看到DNS服务器的地址的配置项。

  因为域名有很多，所以不可能在一台DNS服务器上存放的下，所以会有多台DNS服务器，而每台DNS服务器都会保存多个域，并且同一个层次的域名一定会只存在于同一台DNS服务器上。

  存放方式则是上级域的DNS服务器会有下级域DNS服务器的IP地址，每次查找都从上级域开始，最后所有的根域都会放在每一台DNS服务器上，因此在任意一台DNS服务器上都可以找到域名对应的IP。